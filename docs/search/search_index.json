{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Home This is the documentation website for the LGSVL Simulator project. Visit our website here: https://www.lgsvlsimulator.com Visit our Github here: https://github.com/lgsvl/simulator Quick Start Getting Started Building from source Running with Autoware Running with Apollo Map Annotation NPC Map Navigation Ground truth obstacles Simulator controls","title":"Home"},{"location":"#home","text":"This is the documentation website for the LGSVL Simulator project. Visit our website here: https://www.lgsvlsimulator.com Visit our Github here: https://github.com/lgsvl/simulator","title":"Home"},{"location":"#quick-start","text":"Getting Started Building from source Running with Autoware Running with Apollo Map Annotation NPC Map Navigation Ground truth obstacles Simulator controls","title":"Quick Start"},{"location":"apollo-instructions/","text":"Running Apollo with LG SVL Simulator Table of Contents Getting Started Prerequisites Setup Docker Cloning the Repository Building Apollo and Rosbridge Launching Apollo Alongside the Simulator Getting Started The guide outlines the steps required to setup Apollo for use with the LG Automotive Simulator. If you have not already set up the simulator, please do so first by following the instructions here . We use our forked version of the Apollo repository, which can be found here . The software and source code in this repository are intended only for use with LG Automotive Simulator and should not be used in a real vehicle. Prerequisites Linux operating system (preferably Ubuntu 14.04 or later) Nvidia graphics card (required for Perception) Nvidia proprietary driver must be installed The current version of Apollo does not support Volta and Turing architectures (this includes Titan V and RTX 2080 GPUs). Setup Docker Apollo is designed to run out of docker containers. The image will mount this repository as a volume so the image will not need to be rebuilt each time a modification is made. Installing Docker CE To install Docker CE please refer to the official documentation . We also suggest following through with the post installation steps . Installing Nvidia Docker Before installing nvidia-docker make sure that you have an appropriate Nvidia driver installed. To test if nvidia drivers are properly installed enter nvidia-smi in a terminal. If the drivers are installed properly an output similar to the following should appear. +-----------------------------------------------------------------------------+ | NVIDIA-SMI 390.87 Driver Version: 390.87 | |-------------------------------+----------------------+----------------------+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | |===============================+======================+======================| | 0 GeForce GTX 108... Off | 00000000:65:00.0 On | N/A | | 0% 59C P5 22W / 250W | 1490MiB / 11175MiB | 4% Default | +-------------------------------+----------------------+----------------------+ +-----------------------------------------------------------------------------+ | Processes: GPU Memory | | GPU PID Type Process name Usage | |=============================================================================| | 0 1187 G /usr/lib/xorg/Xorg 863MiB | | 0 3816 G /usr/bin/gnome-shell 305MiB | | 0 4161 G ...-token=7171B24E50C2F2C595566F55F1E4D257 68MiB | | 0 4480 G ...quest-channel-token=3330599186510203656 147MiB | | 0 17936 G ...-token=5299D28BAAD9F3087B25687A764851BB 103MiB | +-----------------------------------------------------------------------------+ The installation steps for nvidia-docker are available at the official repo . Pulling LGSVL Docker image LGSVL maintains a docker image to be used alongside this repository. The docker image is available here . To pull the image use the following command: docker pull lgsvl/apollo Cloning the Repository This repository includes a couple of submodules for HD Maps and rosbrige. To make sure that the submodules are also cloned use the following command: git clone --recurse-submodules git@github.com:lgsvl/apollo.git Building Apollo and rosbridge Now everything should be in place to build apollo. Apollo must be built from the container. To launch the container navigate to the directory where the repository was cloned and enter: ./docker/scripts/dev_start.sh This should launch the container and mount a few volumes. It could take a few minutes to pull the latest volumes on the first run. To get into the container: ./docker/scripts/dev_into.sh Build Apollo: ./apollo.sh build_gpu (optional) to build without gpu: ./apollo.sh build Now build rosbrige: cd ros_pkgs catkin_make Launching Apollo alongside the simulator Here we only describe only a simple case of driving from point A to point B using Apollo and the simulator. To launch apollo, first launch and enter a container as described in the previous steps. To start Apollo: ./scripts/bootstrap.sh Note: you may receive errors about dreamview not being build if you do not run the script from the /apollo directory. Launch rosbridge: ./scripts/rosbridge.sh Run the LG SVL Simulator (see instructions in the simulator repository ) Select the San Francisco map and the XE-Rigged-apollo vehicle. Enable GPS, IMU, LIDAR, HD Mode, and Telephota Camera. (optional) Enable traffic. Open Apollo dreamview in a browser by navigating to: localhost:8888 Select the LG SVL 1080 vehicle and San Francisco map in the top right corner. Open the Module Controller tap (on the left bar). Enable Localization , Perception , Planning , Prediction , Routing , and Control . Navigate to the Route Editing tab. Select a destination by clicking on a lane line and clicking Submit Route . Watch the vehicle navigate to the destination. To stop the docker container run the dev_stop.sh script in apollo/docker/scripts in a new terminal (not in the docker container).","title":"Running with Apollo"},{"location":"apollo-instructions/#running-apollo-with-lg-svl-simulator","text":"","title":"Running Apollo with LG SVL Simulator"},{"location":"apollo-instructions/#table-of-contents","text":"Getting Started Prerequisites Setup Docker Cloning the Repository Building Apollo and Rosbridge Launching Apollo Alongside the Simulator","title":"Table of Contents"},{"location":"apollo-instructions/#getting-started","text":"The guide outlines the steps required to setup Apollo for use with the LG Automotive Simulator. If you have not already set up the simulator, please do so first by following the instructions here . We use our forked version of the Apollo repository, which can be found here . The software and source code in this repository are intended only for use with LG Automotive Simulator and should not be used in a real vehicle.","title":"Getting Started"},{"location":"apollo-instructions/#prerequisites","text":"Linux operating system (preferably Ubuntu 14.04 or later) Nvidia graphics card (required for Perception) Nvidia proprietary driver must be installed The current version of Apollo does not support Volta and Turing architectures (this includes Titan V and RTX 2080 GPUs).","title":"Prerequisites"},{"location":"apollo-instructions/#setup","text":"","title":"Setup"},{"location":"apollo-instructions/#docker","text":"Apollo is designed to run out of docker containers. The image will mount this repository as a volume so the image will not need to be rebuilt each time a modification is made.","title":"Docker"},{"location":"apollo-instructions/#installing-docker-ce","text":"To install Docker CE please refer to the official documentation . We also suggest following through with the post installation steps .","title":"Installing Docker CE"},{"location":"apollo-instructions/#installing-nvidia-docker","text":"Before installing nvidia-docker make sure that you have an appropriate Nvidia driver installed. To test if nvidia drivers are properly installed enter nvidia-smi in a terminal. If the drivers are installed properly an output similar to the following should appear. +-----------------------------------------------------------------------------+ | NVIDIA-SMI 390.87 Driver Version: 390.87 | |-------------------------------+----------------------+----------------------+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | |===============================+======================+======================| | 0 GeForce GTX 108... Off | 00000000:65:00.0 On | N/A | | 0% 59C P5 22W / 250W | 1490MiB / 11175MiB | 4% Default | +-------------------------------+----------------------+----------------------+ +-----------------------------------------------------------------------------+ | Processes: GPU Memory | | GPU PID Type Process name Usage | |=============================================================================| | 0 1187 G /usr/lib/xorg/Xorg 863MiB | | 0 3816 G /usr/bin/gnome-shell 305MiB | | 0 4161 G ...-token=7171B24E50C2F2C595566F55F1E4D257 68MiB | | 0 4480 G ...quest-channel-token=3330599186510203656 147MiB | | 0 17936 G ...-token=5299D28BAAD9F3087B25687A764851BB 103MiB | +-----------------------------------------------------------------------------+ The installation steps for nvidia-docker are available at the official repo .","title":"Installing Nvidia Docker"},{"location":"apollo-instructions/#pulling-lgsvl-docker-image","text":"LGSVL maintains a docker image to be used alongside this repository. The docker image is available here . To pull the image use the following command: docker pull lgsvl/apollo","title":"Pulling LGSVL Docker image"},{"location":"apollo-instructions/#cloning-the-repository","text":"This repository includes a couple of submodules for HD Maps and rosbrige. To make sure that the submodules are also cloned use the following command: git clone --recurse-submodules git@github.com:lgsvl/apollo.git","title":"Cloning the Repository"},{"location":"apollo-instructions/#building-apollo-and-rosbridge","text":"Now everything should be in place to build apollo. Apollo must be built from the container. To launch the container navigate to the directory where the repository was cloned and enter: ./docker/scripts/dev_start.sh This should launch the container and mount a few volumes. It could take a few minutes to pull the latest volumes on the first run. To get into the container: ./docker/scripts/dev_into.sh Build Apollo: ./apollo.sh build_gpu (optional) to build without gpu: ./apollo.sh build Now build rosbrige: cd ros_pkgs catkin_make","title":"Building Apollo and rosbridge"},{"location":"apollo-instructions/#launching-apollo-alongside-the-simulator","text":"Here we only describe only a simple case of driving from point A to point B using Apollo and the simulator. To launch apollo, first launch and enter a container as described in the previous steps. To start Apollo: ./scripts/bootstrap.sh Note: you may receive errors about dreamview not being build if you do not run the script from the /apollo directory. Launch rosbridge: ./scripts/rosbridge.sh Run the LG SVL Simulator (see instructions in the simulator repository ) Select the San Francisco map and the XE-Rigged-apollo vehicle. Enable GPS, IMU, LIDAR, HD Mode, and Telephota Camera. (optional) Enable traffic. Open Apollo dreamview in a browser by navigating to: localhost:8888 Select the LG SVL 1080 vehicle and San Francisco map in the top right corner. Open the Module Controller tap (on the left bar). Enable Localization , Perception , Planning , Prediction , Routing , and Control . Navigate to the Route Editing tab. Select a destination by clicking on a lane line and clicking Submit Route . Watch the vehicle navigate to the destination. To stop the docker container run the dev_stop.sh script in apollo/docker/scripts in a new terminal (not in the docker container).","title":"Launching Apollo alongside the simulator"},{"location":"autoware-instructions/","text":"Autoware with LG SVL Simulator Table of Contents General Setup Requirements Docker image setup Simulator Installation Launching Autoware alongside Simulator Copyright and License General This guide goes through how to run Autoware with the LG SVL Simulator. This link leads to our fork of the ROS-based open-source software Autoware. The repository contains various fixes and changes on top of Autoware to allow running it with LG Silicon Valley Lab's Autonomous Driving Simulator. This fork of Autoware is currently rebased on Autoware release 1.9.0. In order to run Autoware with the LGSVL simulator, it is easiest to build and run a custom Docker image. It will also be necessary to clone LGSVL's autoware-data repository, which contains the HD maps, point cloud maps, and launch scripts needed to run Autoware in the simulator's default San Francisco environment. Autoware communicates with the simulator using the rosbridge_suite, which provides JSON interfacing with ROS publishers/subscribers. Setup Requirements Linux operating system Nvidia graphics card Docker image setup We recommend using a Docker container to run Autoware. We do not currently provide an image on Docker Hub, so it is necessary to build the Docker image first manually. Installing Docker CE To install Docker CE please refer to the official documentation . We also suggest following through with the post installation steps . Installing Nvidia Docker Before installing nvidia-docker make sure that you have an appropriate Nvidia driver installed. To test if nvidia drivers are properly installed enter nvidia-smi in a terminal. If the drivers are installed properly an output similar to the following should appear. +-----------------------------------------------------------------------------+ | NVIDIA-SMI 390.87 Driver Version: 390.87 | |-------------------------------+----------------------+----------------------+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | |===============================+======================+======================| | 0 GeForce GTX 108... Off | 00000000:65:00.0 On | N/A | | 0% 59C P5 22W / 250W | 1490MiB / 11175MiB | 4% Default | +-------------------------------+----------------------+----------------------+ +-----------------------------------------------------------------------------+ | Processes: GPU Memory | | GPU PID Type Process name Usage | |=============================================================================| | 0 1187 G /usr/lib/xorg/Xorg 863MiB | | 0 3816 G /usr/bin/gnome-shell 305MiB | | 0 4161 G ...-token=7171B24E50C2F2C595566F55F1E4D257 68MiB | | 0 4480 G ...quest-channel-token=3330599186510203656 147MiB | | 0 17936 G ...-token=5299D28BAAD9F3087B25687A764851BB 103MiB | +-----------------------------------------------------------------------------+ The installation steps for nvidia-docker are available at the official repo . Building LGSVL Autoware Docker image Cloning requires instaling Git LFS. If you do not already have Git LFS installed, follow these instructions . Clone this repository to your home directory, making sure to checkout the lgsvl_develop branch: $ git clone --recurse-submodules git@github.com:lgsvl/autoware.git -b lgsvl_develop Build the Docker image. This should take some time. $ cd autoware/docker/generic $ ./build.sh kinetic You should now have a Docker image named autoware-kinetic . We also need LGSVL's autoware-data repository, which contains map files and launch scripts for running with the simulator. This repository also uses Git LFS. Clone the autoware-data repository: $ mkdir ~/shared_dir cd ~/shared_dir $ git clone git@github.com:lgsvl/autoware-data.git You are now ready to bring up a Docker container and run Autoware. Launch the container: $ cd ~/autoware/docker/generic $ ./run.sh kinetic You should now be logged into the container under the username autoware . Simulator installation Follow the instructions on our simulator Github page here . Launching Autoware alongside LG SVL Simulator To launch Autoware, first bring up the Docker container as described in the previous section. Inside the container, run Autoware: autoware@[MY_DESKTOP]:~$ cd ~/autoware/ros autoware@[MY_DESKTOP]:~$ ./run A few terminals will open, as well as a GUI for the runtime manager. In the runtime manager, click on the 'Quick Start' tab and load the following launch files from ~/shared_dir/autoware-data/my_launch_sf_map/ by clicking \"Ref\" to the right of each text box: my_map.launch my_sensing_simulator.launch my_localization.launch my_detection.launch my_mission_planning.launch my_motion_planning.launch Click \"Map\" to load the launch file pertaining to the HD maps. An \"Ok\" should appear to the right of the \"Ref\" button when successfully loaded. Then click \"Sensing\" which brings up rosbridge. Run the LG SVL simulator, choosing \"SanFrancisco\" map and \"XE_Rigged-autoware\" for Robot. After \"my_sensing_simulator.launch\" has been loaded, the simulator should show \"Connected\", showing that the simulator has established a connection with the rosbridge server. Click \"Run\" to start, and a vehicle should appear in the streets of San Francisco. On the left, click the check boxes for \"Enable GPS\" and \"Enable LIDAR\". In the Autoware Runtime Manager, continue loading the other launch files - click \"Localization\" and wait for the time to display to the right of \"Ref\". Then click \"Detection,\" \"Mission Planning\", then \"Motion Planning\". Then click \"Rviz\" to launch Rviz - the vector map and location of the vehicle in the map should show. To see the vehicle drive, click \"2D Nav Goal\" in Rviz, then click a destination point and drag slightly in a feasible direction (in the direction of the driving lane) to give a goal destination pose to the planner. The vehicle should plan a path and begin driving towards the destination. You should see something similar in RViz to the above when the vehicle successfully starts navigating using Autoware. Copyright and License This software contains code licensed as described in LICENSE.","title":"Running with Autoware"},{"location":"autoware-instructions/#autoware-with-lg-svl-simulator","text":"","title":"Autoware with LG SVL Simulator"},{"location":"autoware-instructions/#table-of-contents","text":"General Setup Requirements Docker image setup Simulator Installation Launching Autoware alongside Simulator Copyright and License","title":"Table of Contents"},{"location":"autoware-instructions/#general","text":"This guide goes through how to run Autoware with the LG SVL Simulator. This link leads to our fork of the ROS-based open-source software Autoware. The repository contains various fixes and changes on top of Autoware to allow running it with LG Silicon Valley Lab's Autonomous Driving Simulator. This fork of Autoware is currently rebased on Autoware release 1.9.0. In order to run Autoware with the LGSVL simulator, it is easiest to build and run a custom Docker image. It will also be necessary to clone LGSVL's autoware-data repository, which contains the HD maps, point cloud maps, and launch scripts needed to run Autoware in the simulator's default San Francisco environment. Autoware communicates with the simulator using the rosbridge_suite, which provides JSON interfacing with ROS publishers/subscribers.","title":"General"},{"location":"autoware-instructions/#setup","text":"","title":"Setup"},{"location":"autoware-instructions/#requirements","text":"Linux operating system Nvidia graphics card","title":"Requirements"},{"location":"autoware-instructions/#docker-image-setup","text":"We recommend using a Docker container to run Autoware. We do not currently provide an image on Docker Hub, so it is necessary to build the Docker image first manually.","title":"Docker image setup"},{"location":"autoware-instructions/#installing-docker-ce","text":"To install Docker CE please refer to the official documentation . We also suggest following through with the post installation steps .","title":"Installing Docker CE"},{"location":"autoware-instructions/#installing-nvidia-docker","text":"Before installing nvidia-docker make sure that you have an appropriate Nvidia driver installed. To test if nvidia drivers are properly installed enter nvidia-smi in a terminal. If the drivers are installed properly an output similar to the following should appear. +-----------------------------------------------------------------------------+ | NVIDIA-SMI 390.87 Driver Version: 390.87 | |-------------------------------+----------------------+----------------------+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | |===============================+======================+======================| | 0 GeForce GTX 108... Off | 00000000:65:00.0 On | N/A | | 0% 59C P5 22W / 250W | 1490MiB / 11175MiB | 4% Default | +-------------------------------+----------------------+----------------------+ +-----------------------------------------------------------------------------+ | Processes: GPU Memory | | GPU PID Type Process name Usage | |=============================================================================| | 0 1187 G /usr/lib/xorg/Xorg 863MiB | | 0 3816 G /usr/bin/gnome-shell 305MiB | | 0 4161 G ...-token=7171B24E50C2F2C595566F55F1E4D257 68MiB | | 0 4480 G ...quest-channel-token=3330599186510203656 147MiB | | 0 17936 G ...-token=5299D28BAAD9F3087B25687A764851BB 103MiB | +-----------------------------------------------------------------------------+ The installation steps for nvidia-docker are available at the official repo .","title":"Installing Nvidia Docker"},{"location":"autoware-instructions/#building-lgsvl-autoware-docker-image","text":"Cloning requires instaling Git LFS. If you do not already have Git LFS installed, follow these instructions . Clone this repository to your home directory, making sure to checkout the lgsvl_develop branch: $ git clone --recurse-submodules git@github.com:lgsvl/autoware.git -b lgsvl_develop Build the Docker image. This should take some time. $ cd autoware/docker/generic $ ./build.sh kinetic You should now have a Docker image named autoware-kinetic . We also need LGSVL's autoware-data repository, which contains map files and launch scripts for running with the simulator. This repository also uses Git LFS. Clone the autoware-data repository: $ mkdir ~/shared_dir cd ~/shared_dir $ git clone git@github.com:lgsvl/autoware-data.git You are now ready to bring up a Docker container and run Autoware. Launch the container: $ cd ~/autoware/docker/generic $ ./run.sh kinetic You should now be logged into the container under the username autoware .","title":"Building LGSVL Autoware Docker image"},{"location":"autoware-instructions/#simulator-installation","text":"Follow the instructions on our simulator Github page here .","title":"Simulator installation"},{"location":"autoware-instructions/#launching-autoware-alongside-lg-svl-simulator","text":"To launch Autoware, first bring up the Docker container as described in the previous section. Inside the container, run Autoware: autoware@[MY_DESKTOP]:~$ cd ~/autoware/ros autoware@[MY_DESKTOP]:~$ ./run A few terminals will open, as well as a GUI for the runtime manager. In the runtime manager, click on the 'Quick Start' tab and load the following launch files from ~/shared_dir/autoware-data/my_launch_sf_map/ by clicking \"Ref\" to the right of each text box: my_map.launch my_sensing_simulator.launch my_localization.launch my_detection.launch my_mission_planning.launch my_motion_planning.launch Click \"Map\" to load the launch file pertaining to the HD maps. An \"Ok\" should appear to the right of the \"Ref\" button when successfully loaded. Then click \"Sensing\" which brings up rosbridge. Run the LG SVL simulator, choosing \"SanFrancisco\" map and \"XE_Rigged-autoware\" for Robot. After \"my_sensing_simulator.launch\" has been loaded, the simulator should show \"Connected\", showing that the simulator has established a connection with the rosbridge server. Click \"Run\" to start, and a vehicle should appear in the streets of San Francisco. On the left, click the check boxes for \"Enable GPS\" and \"Enable LIDAR\". In the Autoware Runtime Manager, continue loading the other launch files - click \"Localization\" and wait for the time to display to the right of \"Ref\". Then click \"Detection,\" \"Mission Planning\", then \"Motion Planning\". Then click \"Rviz\" to launch Rviz - the vector map and location of the vehicle in the map should show. To see the vehicle drive, click \"2D Nav Goal\" in Rviz, then click a destination point and drag slightly in a feasible direction (in the direction of the driving lane) to give a goal destination pose to the planner. The vehicle should plan a path and begin driving towards the destination. You should see something similar in RViz to the above when the vehicle successfully starts navigating using Autoware.","title":"Launching Autoware alongside LG SVL Simulator"},{"location":"autoware-instructions/#copyright-and-license","text":"This software contains code licensed as described in LICENSE.","title":"Copyright and License"},{"location":"build-instructions/","text":"Instructions to build standalone executable Build steps for Ubuntu host: Install Unity 2018.2.4f1: https://beta.unity3d.com/download/fe703c5165de/public_download.html install into the /opt/Unity folder: chmod +x ~/Downloads/UnitySetup-2018.2.4f1 ./UnitySetup-2018.2.4f1 --unattended --install-location=/opt/Unity --components=Unity,Windows-Mono run Unity and make sure it's activated Make sure you have git-lfs installed before cloning this repository . Clone simulator from GitHub: git clone https://github.com/lgsvl/simulator.git Run build: mkdir build /opt/Unity/Editor/Unity \\ -batchmode \\ -nographics \\ -silent-crashes \\ -quit \\ -buildDestination ./build/simulator \\ -buildTarget Linux64 \\ -executeMethod BuildScript.Build \\ -projectPath . \\ -logFile /dev/stdout Test simulator: Run rosbridge: roslaunch rosbridge_server rosbridge_websocket.launch Run simulator from build/simulator Choose \"Free Roaming\" - \"DuckieDowntown\" as map - \"Duckiebot-duckietown-ros1\" as robot make sure it's connected, click \"RUN\" - make sure it's running, you can operate the robot Run rviz or rqt_image_view and see image from topic \"/simulator/camera_node/image/compressed\"","title":"Build instructions"},{"location":"build-instructions/#instructions-to-build-standalone-executable","text":"Build steps for Ubuntu host: Install Unity 2018.2.4f1: https://beta.unity3d.com/download/fe703c5165de/public_download.html install into the /opt/Unity folder: chmod +x ~/Downloads/UnitySetup-2018.2.4f1 ./UnitySetup-2018.2.4f1 --unattended --install-location=/opt/Unity --components=Unity,Windows-Mono run Unity and make sure it's activated Make sure you have git-lfs installed before cloning this repository . Clone simulator from GitHub: git clone https://github.com/lgsvl/simulator.git Run build: mkdir build /opt/Unity/Editor/Unity \\ -batchmode \\ -nographics \\ -silent-crashes \\ -quit \\ -buildDestination ./build/simulator \\ -buildTarget Linux64 \\ -executeMethod BuildScript.Build \\ -projectPath . \\ -logFile /dev/stdout Test simulator: Run rosbridge: roslaunch rosbridge_server rosbridge_websocket.launch Run simulator from build/simulator Choose \"Free Roaming\" - \"DuckieDowntown\" as map - \"Duckiebot-duckietown-ros1\" as robot make sure it's connected, click \"RUN\" - make sure it's running, you can operate the robot Run rviz or rqt_image_view and see image from topic \"/simulator/camera_node/image/compressed\"","title":"Instructions to build standalone executable"},{"location":"getting-started/","text":"LGSVL Simulator: An Autonomous Vehicle Simulator Website | Documentation | Download Introduction LG Silicon Valley Lab has developed a Unity-based multi-robot simulator for autonomous vehicle developers. We provide an out-of-the-box solution which can meet the needs of developers wishing to focus on testing their autonomous vehicle algorithms. It currently has integration with the Duckietown , TierIV's Autoware , and Baidu's Apollo platforms, can generate HD maps, and be immediately used for testing and validation of a whole system with little need for custom integrations. We hope to build a collaborative community among robotics and autonomous vehicle developers by open sourcing our efforts. To use the simulator with Apollo, after following the build steps for the simulator, follow the guide on our Apollo fork . To use the simulator with Autoware, build the simulator then follow the guide on our Autoware fork . Video ( Link ) Getting Started Running the simulator with reasonable performance and frame rate (for perception related tasks) requires a high performance desktop. Below is the recommended system for running the simulator at high quality. We are currently working on performance improvements for a better experience. Recommended system: 4 GHz Dual core CPU Nvidia GTX 1080 Windows 10 64 Bit The easiest way to get started with running the simulator is to download our latest release and run as a standalone executable. For the latest functionality or if you want to modify the simulator for your own needs, you can checkout our source, open it as a project in Unity, and run inside the Unity Editor. Otherwise, you can build the Unity project into a standalone executable. Currently, running the simulator in Windows yields better performance than running on Linux. Downloading and starting simulator Download the latest release of the LGSVL Simulator for your supported operating system (Windows or Linux) here: https://github.com/lgsvl/simulator/releases/latest Unzip the downloaded folder and run the executable. Steps for starting simulator in Unity Editor Install Unity 2018.2.4. Windows link: https://unity3d.com/get-unity/download/archive Linux link (2018.2.4f1): https://beta.unity3d.com/download/fe703c5165de/public_download.html Install Git LFS (this should be as simple as git lfs install ). Since this repository contains several large files, we speed up clones/uploads with Git LFS. This is a requirement for cloning our project, and without it the repository cannot be set up properly. Clone this repository from Github: git clone https://github.com/lgsvl/simulator.git Open Unity Editor by navigating to where it is installed and launching the Unity executable. Open the simulator project that was cloned in step 3 by selecting the simulator folder. Run the simulator. On the bottom left in the Project panel, Navigate to Assets- Scenes. Then double-click \"Menu\" (with the Unity icon next to it) to load the scene. At the top of the editor, click the Play button to start the simulator. Build standalone executable If you would prefer to not run in Unity Editor and build the standalone executable yourself, follow the instructions here . Simulator Instructions After starting the simulator, you should see the main menu. Currently, only Free Roaming mode is supported. Click \"Free Roaming.\" Select the appropriate map and vehicle. For a standard setup, select \"SanFrancisco\" for map and \"XE_Rigged-apollo\" for Robot. If connecting with Autoware or Apollo, make sure simulator establishes connection with rosbridge. Click \"Run\" to begin. The program will not allow running if there is no established connection with a rosbridge. To bypass this and just test out the simulator environment, hold down the Shift button and click \"Run.\" The vehicle/robot should spawn inside the map environment that was selected. Read here for an explanation of all current keyboard shortcuts and controls. Follow the guides on our respective Autoware and Apollo repositories for instructions on running the platforms with the simulator. Guide to simulator functionality Look here for a guide to currently available functionality and keyboard shortcuts for using the simulator. Contact Please feel free to provide feedback or ask questions by creating a Github issue. For inquiries about collaboration, please email us at . Copyright and License Copyright (c) 2018 LG Electronics, Inc. This software contains code licensed as described in LICENSE.","title":"Getting started"},{"location":"getting-started/#introduction","text":"LG Silicon Valley Lab has developed a Unity-based multi-robot simulator for autonomous vehicle developers. We provide an out-of-the-box solution which can meet the needs of developers wishing to focus on testing their autonomous vehicle algorithms. It currently has integration with the Duckietown , TierIV's Autoware , and Baidu's Apollo platforms, can generate HD maps, and be immediately used for testing and validation of a whole system with little need for custom integrations. We hope to build a collaborative community among robotics and autonomous vehicle developers by open sourcing our efforts. To use the simulator with Apollo, after following the build steps for the simulator, follow the guide on our Apollo fork . To use the simulator with Autoware, build the simulator then follow the guide on our Autoware fork .","title":"Introduction"},{"location":"getting-started/#video","text":"( Link )","title":"Video"},{"location":"getting-started/#getting-started","text":"Running the simulator with reasonable performance and frame rate (for perception related tasks) requires a high performance desktop. Below is the recommended system for running the simulator at high quality. We are currently working on performance improvements for a better experience. Recommended system: 4 GHz Dual core CPU Nvidia GTX 1080 Windows 10 64 Bit The easiest way to get started with running the simulator is to download our latest release and run as a standalone executable. For the latest functionality or if you want to modify the simulator for your own needs, you can checkout our source, open it as a project in Unity, and run inside the Unity Editor. Otherwise, you can build the Unity project into a standalone executable. Currently, running the simulator in Windows yields better performance than running on Linux.","title":"Getting Started"},{"location":"getting-started/#downloading-and-starting-simulator","text":"Download the latest release of the LGSVL Simulator for your supported operating system (Windows or Linux) here: https://github.com/lgsvl/simulator/releases/latest Unzip the downloaded folder and run the executable.","title":"Downloading and starting simulator"},{"location":"getting-started/#steps-for-starting-simulator-in-unity-editor","text":"Install Unity 2018.2.4. Windows link: https://unity3d.com/get-unity/download/archive Linux link (2018.2.4f1): https://beta.unity3d.com/download/fe703c5165de/public_download.html Install Git LFS (this should be as simple as git lfs install ). Since this repository contains several large files, we speed up clones/uploads with Git LFS. This is a requirement for cloning our project, and without it the repository cannot be set up properly. Clone this repository from Github: git clone https://github.com/lgsvl/simulator.git Open Unity Editor by navigating to where it is installed and launching the Unity executable. Open the simulator project that was cloned in step 3 by selecting the simulator folder. Run the simulator. On the bottom left in the Project panel, Navigate to Assets- Scenes. Then double-click \"Menu\" (with the Unity icon next to it) to load the scene. At the top of the editor, click the Play button to start the simulator.","title":"Steps for starting simulator in Unity Editor"},{"location":"getting-started/#build-standalone-executable","text":"If you would prefer to not run in Unity Editor and build the standalone executable yourself, follow the instructions here .","title":"Build standalone executable"},{"location":"getting-started/#simulator-instructions","text":"After starting the simulator, you should see the main menu. Currently, only Free Roaming mode is supported. Click \"Free Roaming.\" Select the appropriate map and vehicle. For a standard setup, select \"SanFrancisco\" for map and \"XE_Rigged-apollo\" for Robot. If connecting with Autoware or Apollo, make sure simulator establishes connection with rosbridge. Click \"Run\" to begin. The program will not allow running if there is no established connection with a rosbridge. To bypass this and just test out the simulator environment, hold down the Shift button and click \"Run.\" The vehicle/robot should spawn inside the map environment that was selected. Read here for an explanation of all current keyboard shortcuts and controls. Follow the guides on our respective Autoware and Apollo repositories for instructions on running the platforms with the simulator.","title":"Simulator Instructions"},{"location":"getting-started/#guide-to-simulator-functionality","text":"Look here for a guide to currently available functionality and keyboard shortcuts for using the simulator.","title":"Guide to simulator functionality"},{"location":"getting-started/#contact","text":"Please feel free to provide feedback or ask questions by creating a Github issue. For inquiries about collaboration, please email us at .","title":"Contact"},{"location":"getting-started/#copyright-and-license","text":"Copyright (c) 2018 LG Electronics, Inc. This software contains code licensed as described in LICENSE.","title":"Copyright and License"},{"location":"keyboard-shortcuts/","text":"Simulator Controls Key Bindings Officially supported: Esc - Exit prompt F1 - Help menu Space - Toggle User Interface - Drive vehicle/robot forward/back, turn For developer use: F5 - Save current position of vehicle F9 - Reset to last saved position of vehicle F12 - Toggle weather control panel H - Spawn/Respawn Non-Player Character (NPC) vehicles K - Remove NPC vehicles End - Toggle ignition (must be on for vehicle to move) Page Up - Shift to forward drive gear Page Down - Shift to reverse gear V - Toggle main camera view (from in front of car, from inside of car) Miscellaneous Left Shift - Toggle headlights Right Shift - Toggle parking brake (needs to be off for vehicle to move) Num Pad 5 - Num Pad 9 - Windshield wipers Steering Wheel Controls (Demonstration) We use the Logitech G920 steering wheel with our simulator. The following table shows key mappings on the wheel for demonstration purposes, mainly for developer use. Logitech Wheel Button Keyboard equivalent Effect Right paddle Up Accelerate Left paddle Down Brake RSB Page Up/ Page Down Toggle between Drive and Reverse LSB Num 5-8 Toggle windshield wipers on/off A Spacebar Toggle UI Switch (sensor menu camera display) B H Respawn all NPC traffic (not toggle) X - Toggle sensor effects (LiDAR) Y V Cycle through camera views D-pad Up - Daytime scenario (no rain or fog) D-pad Down - Rainy scenario (with fog) D-pad Left - Night scenario (rain + fog + road wetness) D-pad Right - Sunrise foggy scenario Overlapping Squares Left Shift Cycle through headlight settings (off-low-high) Hamburger Menu (3 horizontal lines) Right Shift Toggle parking brake Xbox End Toggle vehicle ignition","title":"Keyboard shortcuts"},{"location":"keyboard-shortcuts/#simulator-controls","text":"","title":"Simulator Controls"},{"location":"keyboard-shortcuts/#key-bindings","text":"","title":"Key Bindings"},{"location":"keyboard-shortcuts/#officially-supported","text":"Esc - Exit prompt F1 - Help menu Space - Toggle User Interface - Drive vehicle/robot forward/back, turn","title":"Officially supported:"},{"location":"keyboard-shortcuts/#for-developer-use","text":"F5 - Save current position of vehicle F9 - Reset to last saved position of vehicle F12 - Toggle weather control panel H - Spawn/Respawn Non-Player Character (NPC) vehicles K - Remove NPC vehicles End - Toggle ignition (must be on for vehicle to move) Page Up - Shift to forward drive gear Page Down - Shift to reverse gear V - Toggle main camera view (from in front of car, from inside of car)","title":"For developer use:"},{"location":"keyboard-shortcuts/#miscellaneous","text":"Left Shift - Toggle headlights Right Shift - Toggle parking brake (needs to be off for vehicle to move) Num Pad 5 - Num Pad 9 - Windshield wipers","title":"Miscellaneous"},{"location":"keyboard-shortcuts/#steering-wheel-controls-demonstration","text":"We use the Logitech G920 steering wheel with our simulator. The following table shows key mappings on the wheel for demonstration purposes, mainly for developer use. Logitech Wheel Button Keyboard equivalent Effect Right paddle Up Accelerate Left paddle Down Brake RSB Page Up/ Page Down Toggle between Drive and Reverse LSB Num 5-8 Toggle windshield wipers on/off A Spacebar Toggle UI Switch (sensor menu camera display) B H Respawn all NPC traffic (not toggle) X - Toggle sensor effects (LiDAR) Y V Cycle through camera views D-pad Up - Daytime scenario (no rain or fog) D-pad Down - Rainy scenario (with fog) D-pad Left - Night scenario (rain + fog + road wetness) D-pad Right - Sunrise foggy scenario Overlapping Squares Left Shift Cycle through headlight settings (off-low-high) Hamburger Menu (3 horizontal lines) Right Shift Toggle parking brake Xbox End Toggle vehicle ignition","title":"Steering Wheel Controls (Demonstration)"},{"location":"map-annotation/","text":"Map Annotation The LGSVL Simulator supports creating, editing, and exporting of HD/vector maps of existing 3D environments (Unity scenes). The maps can be saved in the currently supported Apollo or Autoware formats. Currently, map annotation is only supported while running the simulator as a Unity project in a Windows environment. Creating a new map Open MapToolUtilEdit in Unity : Window - Map Tool Panel By default, map annotation is not shown. Click Show/Hide Map to show existing map annotation. Before annotation, select correct Parent Object in MapToolUtilEdit, for example Map . Then every new object you create will be under Map object. - After annotation is done, remember to save: go to Map level, click Apply Annotate Lanes Create temp map waypoint Maker sure your roads belong to the layer of Ground and Road since waypoint will be only created on this layer. Click Create Temp Map Waypoint button to create a new point in the center of current scene window. Make Lane Select the waypoint, ctrl + d to duplicate and move them to desired positions - Connect them to make a lane - Sequentially select points - Click Make Lane (MapLaneSegmentBuilder) button to make a lane - You can make StopLine and BoundaryLine in a similar way by using the other two buttons below Make Lane (MapLaneSegmentBuilder) In-Between Lane Generation You can make lanes by creating temp points and connecting them, and you can also make an in-between lane easily when you have two existing lanes and want to make another lane to connect them together Select both lanes, create the new in-between lane by clicking Auto Generate In-Between Lane button at the bottom of MapToolUtilEdit panel Because you might want to connect lanes of different angles and do it multiple times, we provide the ability of saving different presets to generate in-between lanes. Larger value of Tangent makes the lane more straight You can also change the number of presets by changing Preset Count Check Offset Start/End Points if you want a small offset between the end points of the new lane and the end point of the selected two lanes, otherwise those points will overlap with each other completely. Link neighbor lanes After you create parallel lanes, you need to link them to have correct relations Link neighbor lanes of same direction Select lanes sequentially from left/right Click Link Neighbor Lanes from Left/Right to link them After linking, you can check it in every lane object's inspector Link reverse neighbor lanes Select both reverse neighbor lanes Click Link Reverse Neighbor Lanes In the above screenshot, double yellow boundary lane can be generated by creating BoundaryLine and changing its Line Type from SOLID_WHITE to DOUBLE_YELLOW in its inspector If anything goes wrong, you can nullify all neighbor lane fields by clicking Nullify All Neighbor Lane Fields button Set correct left/right boundary type The rightmost lane typically has a right boundary type of CURB Middle lanes typically have a left boundary type of DOUBLE_YELLOW Traffic light annotation Make SignalLight Select local instead of global in both Unity and MapToolUtilEdit panel Find one traffic light that is already made whose type is HDMapSignalLight (with a red boundary box) Load template by clicking Load SignalLight Template button In the above screenshot, the left SignalLight (type: HDMapSignalLight) has a red boundary box and the right one (type: MapSignalLight) doesn't have it Make sure relative axis relations are selected correctly In the row of Make SignalLight(HDMapSignalLightBuilder) , select Aim as Y Neg , Up as Z Pos Select your desired empty signal light holder Click Make SignalLight (HDMapSignalLightBuilder) to generate the signal light Note: currently, HDMapSignalLightBuilder is for Apollo; one per road is enough. MapSignalLightBuilder is for Autoware, which needs one for every lane. There is a converter button at the bottom of MapToolUtilEdit to get MapSignalLightBuilder from HDMapSignalLightBuilder Link the created traffic light to the corresponding stopline Select both signallight and the stopline Click Link SignalLight and StopLine in Advanced Utils section in the panel Similarly, you can create stop sign and link the stop sign to the corresponding stopline using corresponding buttons. Create traffic pole and link to contained signal light (additional step for Autoware) Select desired traffic pole Make sure Local and Z Pos are selected Click Make Traffic Pole (VectorMapPoleBuilder) Press w so you can rotate the created pole. Rotate the bounding box of the pole to include corresponding signal lights in it Click Link to Contained SignalLights in the traffic pole's inspector OR select both signal lights and traffic pole, click Link TrafficPole and SignalLight in the MapToolUtilEdit panel For traffic poles in multiple intersections, to save time you can Create and rotate for all VectorMapPole s Select all VectorMapPole in Hierarchy tab - Link Selected TrafficPoles To Contained SignalLights Notes for stopline For Autoware, there needs to be two waypoints for every lane, i.e. five waypoints are needed for four lanes, three waypoints are needed for two lanes, etc. Apollo does not have such a requirement. Export map files For Apollo, select HDMapTool in Hierachy tab, click Export HD Map If your map annotation is correct, you will see Successfully generated and exported Apollo HD Map! in the Console You can find the generated map file in hd_map folder under the root of the repo It is similar for Autoware: select VectorMapTool , then click Export Vector Map","title":"Map Annotation"},{"location":"map-annotation/#map-annotation","text":"The LGSVL Simulator supports creating, editing, and exporting of HD/vector maps of existing 3D environments (Unity scenes). The maps can be saved in the currently supported Apollo or Autoware formats. Currently, map annotation is only supported while running the simulator as a Unity project in a Windows environment.","title":"Map Annotation"},{"location":"map-annotation/#creating-a-new-map","text":"Open MapToolUtilEdit in Unity : Window - Map Tool Panel By default, map annotation is not shown. Click Show/Hide Map to show existing map annotation. Before annotation, select correct Parent Object in MapToolUtilEdit, for example Map . Then every new object you create will be under Map object. - After annotation is done, remember to save: go to Map level, click Apply","title":"Creating a new map"},{"location":"map-annotation/#annotate-lanes","text":"","title":"Annotate Lanes"},{"location":"map-annotation/#create-temp-map-waypoint","text":"Maker sure your roads belong to the layer of Ground and Road since waypoint will be only created on this layer. Click Create Temp Map Waypoint button to create a new point in the center of current scene window.","title":"Create temp map waypoint"},{"location":"map-annotation/#make-lane","text":"Select the waypoint, ctrl + d to duplicate and move them to desired positions - Connect them to make a lane - Sequentially select points - Click Make Lane (MapLaneSegmentBuilder) button to make a lane - You can make StopLine and BoundaryLine in a similar way by using the other two buttons below Make Lane (MapLaneSegmentBuilder) In-Between Lane Generation You can make lanes by creating temp points and connecting them, and you can also make an in-between lane easily when you have two existing lanes and want to make another lane to connect them together Select both lanes, create the new in-between lane by clicking Auto Generate In-Between Lane button at the bottom of MapToolUtilEdit panel Because you might want to connect lanes of different angles and do it multiple times, we provide the ability of saving different presets to generate in-between lanes. Larger value of Tangent makes the lane more straight You can also change the number of presets by changing Preset Count Check Offset Start/End Points if you want a small offset between the end points of the new lane and the end point of the selected two lanes, otherwise those points will overlap with each other completely.","title":"Make Lane"},{"location":"map-annotation/#link-neighbor-lanes","text":"After you create parallel lanes, you need to link them to have correct relations Link neighbor lanes of same direction Select lanes sequentially from left/right Click Link Neighbor Lanes from Left/Right to link them After linking, you can check it in every lane object's inspector Link reverse neighbor lanes Select both reverse neighbor lanes Click Link Reverse Neighbor Lanes In the above screenshot, double yellow boundary lane can be generated by creating BoundaryLine and changing its Line Type from SOLID_WHITE to DOUBLE_YELLOW in its inspector If anything goes wrong, you can nullify all neighbor lane fields by clicking Nullify All Neighbor Lane Fields button","title":"Link neighbor lanes"},{"location":"map-annotation/#set-correct-leftright-boundary-type","text":"The rightmost lane typically has a right boundary type of CURB Middle lanes typically have a left boundary type of DOUBLE_YELLOW","title":"Set correct left/right boundary type"},{"location":"map-annotation/#traffic-light-annotation","text":"Make SignalLight Select local instead of global in both Unity and MapToolUtilEdit panel Find one traffic light that is already made whose type is HDMapSignalLight (with a red boundary box) Load template by clicking Load SignalLight Template button In the above screenshot, the left SignalLight (type: HDMapSignalLight) has a red boundary box and the right one (type: MapSignalLight) doesn't have it Make sure relative axis relations are selected correctly In the row of Make SignalLight(HDMapSignalLightBuilder) , select Aim as Y Neg , Up as Z Pos Select your desired empty signal light holder Click Make SignalLight (HDMapSignalLightBuilder) to generate the signal light Note: currently, HDMapSignalLightBuilder is for Apollo; one per road is enough. MapSignalLightBuilder is for Autoware, which needs one for every lane. There is a converter button at the bottom of MapToolUtilEdit to get MapSignalLightBuilder from HDMapSignalLightBuilder Link the created traffic light to the corresponding stopline Select both signallight and the stopline Click Link SignalLight and StopLine in Advanced Utils section in the panel Similarly, you can create stop sign and link the stop sign to the corresponding stopline using corresponding buttons.","title":"Traffic light annotation"},{"location":"map-annotation/#create-traffic-pole-and-link-to-contained-signal-light-additional-step-for-autoware","text":"Select desired traffic pole Make sure Local and Z Pos are selected Click Make Traffic Pole (VectorMapPoleBuilder) Press w so you can rotate the created pole. Rotate the bounding box of the pole to include corresponding signal lights in it Click Link to Contained SignalLights in the traffic pole's inspector OR select both signal lights and traffic pole, click Link TrafficPole and SignalLight in the MapToolUtilEdit panel For traffic poles in multiple intersections, to save time you can Create and rotate for all VectorMapPole s Select all VectorMapPole in Hierarchy tab - Link Selected TrafficPoles To Contained SignalLights Notes for stopline For Autoware, there needs to be two waypoints for every lane, i.e. five waypoints are needed for four lanes, three waypoints are needed for two lanes, etc. Apollo does not have such a requirement.","title":"Create traffic pole and link to contained signal light (additional step for Autoware)"},{"location":"map-annotation/#export-map-files","text":"For Apollo, select HDMapTool in Hierachy tab, click Export HD Map If your map annotation is correct, you will see Successfully generated and exported Apollo HD Map! in the Console You can find the generated map file in hd_map folder under the root of the repo It is similar for Autoware: select VectorMapTool , then click Export Vector Map","title":"Export map files"},{"location":"npc-map-navigation/","text":"NPC Map Navigation Non-player character (NPC) vehicles now use the MapSegmentBuilder classes to navigate annotated maps. Map Manager Use SanFrancisco.scene as a template to build map data for NPCs. Remove SFTraffic_New.prefab from scene and any associated scripts, e.g., TrafPerformanceManager.cs, TrafInfoManager.cs and TrafSystem.cs. Create a new GameObject at position Vector3.zero and Quaternion.identity, named Map . Add MapManager.cs component to this object and save as a prefab in project assets. The public field, SpawnLanesHolder, of MapManager.cs requires the MapLaneSegmentBuilder holder transform. The public field, IntersectionsHolder, of MapManager.cs requires the TrafficLights holder transform. This has intersection meshes and scripts for lights. The public fields Green, Yellow, and Red are materials for the segmentation camera system. If using the Traffic meshes from SanFrancisco.scene, these need to be added here. If not, IntersectionComponent.cs and associated scripts will need to be edited. Map Lane and Intersection Grouping Create TrafficLanes holder object as a child of Map.prefab . Place all MapLaneSegmentBuilder objects into TrafficLanes holder object for all non intersection lanes. Create IntersectionLanes holder object as a child of Map.prefab . Create a new Intersection holder object as a child of IntersectionLanes transform for each intersection annotation. Be sure its world position is in the center of each intersection. Place MapLaneSegmentBuilder and MapStopLineSegmentBuilder objects into Intersection holder object for each intersection. Map Intersection Builder For each Intersection holder, add the MapIntersectionBuilder.cs component. Traffic Lights Create a TrafficLights holder object to hold all traffic light meshes or place all traffic meshes under the map annotation Intersections . Just be sure to have the root holder be in MapManager.cs IntersectionHolder public reference. Create a Intersection holder object. Be sure its world position is in the center of each intersection. Add IntersectionComponent.cs to each Intersection holder object. Place TrafficLightPole facing it's corresponding StopLineSegmentBuilder object. The transfom needs to be Z axis or gizmo arrow forward, parallel to the StopLineSegmentBuilder object Z axis or gizmo arrow forward. Add IntersectionTrafficLightSetComponent.cs. Place as a child of the Intersection holder object. For opposite facing TrafficLightPoles and StopLineSegmentBuilders , be sure to orient transforms in Z axis or gizmo arrow forward but perpendicular to other facing light poles and stoplines. Add TrafficLight meshes as children of the TrafficLightPole . Add IntersectionTrafficLightSetComponent.cs to each TrafficLight . StopLine and MapLaneSegmentBuilder overlap MapLaneSegmentBuilders final waypoint needs to be slightly overlapping the MapStopLineBuilder","title":"NPC Map Navigation"},{"location":"npc-map-navigation/#npc-map-navigation","text":"Non-player character (NPC) vehicles now use the MapSegmentBuilder classes to navigate annotated maps.","title":"NPC Map Navigation"},{"location":"npc-map-navigation/#map-manager","text":"Use SanFrancisco.scene as a template to build map data for NPCs. Remove SFTraffic_New.prefab from scene and any associated scripts, e.g., TrafPerformanceManager.cs, TrafInfoManager.cs and TrafSystem.cs. Create a new GameObject at position Vector3.zero and Quaternion.identity, named Map . Add MapManager.cs component to this object and save as a prefab in project assets. The public field, SpawnLanesHolder, of MapManager.cs requires the MapLaneSegmentBuilder holder transform. The public field, IntersectionsHolder, of MapManager.cs requires the TrafficLights holder transform. This has intersection meshes and scripts for lights. The public fields Green, Yellow, and Red are materials for the segmentation camera system. If using the Traffic meshes from SanFrancisco.scene, these need to be added here. If not, IntersectionComponent.cs and associated scripts will need to be edited.","title":"Map Manager"},{"location":"npc-map-navigation/#map-lane-and-intersection-grouping","text":"Create TrafficLanes holder object as a child of Map.prefab . Place all MapLaneSegmentBuilder objects into TrafficLanes holder object for all non intersection lanes. Create IntersectionLanes holder object as a child of Map.prefab . Create a new Intersection holder object as a child of IntersectionLanes transform for each intersection annotation. Be sure its world position is in the center of each intersection. Place MapLaneSegmentBuilder and MapStopLineSegmentBuilder objects into Intersection holder object for each intersection.","title":"Map Lane and Intersection Grouping"},{"location":"npc-map-navigation/#map-intersection-builder","text":"For each Intersection holder, add the MapIntersectionBuilder.cs component.","title":"Map Intersection Builder"},{"location":"npc-map-navigation/#traffic-lights","text":"Create a TrafficLights holder object to hold all traffic light meshes or place all traffic meshes under the map annotation Intersections . Just be sure to have the root holder be in MapManager.cs IntersectionHolder public reference. Create a Intersection holder object. Be sure its world position is in the center of each intersection. Add IntersectionComponent.cs to each Intersection holder object. Place TrafficLightPole facing it's corresponding StopLineSegmentBuilder object. The transfom needs to be Z axis or gizmo arrow forward, parallel to the StopLineSegmentBuilder object Z axis or gizmo arrow forward. Add IntersectionTrafficLightSetComponent.cs. Place as a child of the Intersection holder object. For opposite facing TrafficLightPoles and StopLineSegmentBuilders , be sure to orient transforms in Z axis or gizmo arrow forward but perpendicular to other facing light poles and stoplines. Add TrafficLight meshes as children of the TrafficLightPole . Add IntersectionTrafficLightSetComponent.cs to each TrafficLight .","title":"Traffic Lights"},{"location":"npc-map-navigation/#stopline-and-maplanesegmentbuilder-overlap","text":"MapLaneSegmentBuilders final waypoint needs to be slightly overlapping the MapStopLineBuilder","title":"StopLine and MapLaneSegmentBuilder overlap"},{"location":"perception-ground-truth/","text":"Ground Truth Obstacles Overview You can use the LGSVL Simulator to view, subscribe to, and compare ground truth obstacle information. The simulator allows visualization of 2D or 3D bounding boxes of vehicles, pedestrians, and unknown objects, and publishes detailed information (currently in a custom ROS message format) about the ground truth obstacles. View ground truth obstacles in Simulator Ground truth obstacles for traffic can be viewed in the simulator with both 3D bounding boxes as well as 2D bounding boxes in the camera. To view 3D Bounding boxes in the simulator: Start the simulator in the San Francisco map and desired vehicle Check \"Sensor Effects\" Check \"Enable Traffic\" Check \"Enable Ground Truth 3D\" You should see 3D boxes in green highlighting NPC vehicles in the simulator main view. To view 2D bounding boxes: Start the simulator in the San Francisco map with desired vehicle Check \"Ground Truth 2D\" You should see 2D boxes highlighting NPC vehicles in the \"Ground Truth 2D Camera\" camera view. Bounding box colors Green: Vehicles Yellow: Pedestrians Purple: Unknown Subscribe to ground truth ROS messages LGSVL Simulator also publishes custom ROS messages describing the ground truth data of non-ego vehicles. In order to subscribe to the ground truth messages, you will need the ROS package lgsvl_msgs . It contains custom ROS message types for 2D and 3D bounding boxes. You will also need to be running rosbridge. Install the lgsvl_msgs ROS package Use LGSVL Apollo or Autoware repository If you are using LGSVL's forks of Apollo or Autoware , the package is already included as a submodule in the respective workspace: LGSVL Autoware: autoware - ros - src - msgs - lgsvl_msgs LGSVL Apollo: apollo - ros_pkgs - src - lgsvl_msgs Following the instructions to build the ROS workspace will build the lgsvl_msgs package as well. If you are not running LGSVL's Apollo or Autoware forks, you can directly clone our lgsvl_msgs package into your ROS workspace and build. Manually install lgsvl_msgs Clone lgsvl_msgs to your ROS workspace or msgs directory: $ git clone https://github.com/lgsvl/lgsvl_msgs {MY_ROS_WS} Build the ROS workspace: $ catkin_make Subscribe to ground truth messages from Simulator You can subscribe to ground truth messages published as ROS messages (when 2D/3D ground truth are enabled) Topic: /simulator/ground_truth/2d_detections Message type: lgsvl_msgs/Detection2DArray: Link Topic: /simulator/ground_truth/3d_detections Message type: lgsvl_msgs/Detection3DArray: Link View estimated detections in Simulator If you are running Autoware with LGSVL Simulator, you can also visualize Autoware object detection outputs in the simulator for both Lidar-based and Camera-based detections. Make sure that Autoware perception module is running and detection output topics have output messages. (You can also publish to the below topics even if you are not using Autoware) Required ROS topics: - For Lidar detections: /detection/lidar_objects - For Camera detections: /detection/vision_objects To view Lidar detections: Start the simulator in the San Francisco map with XE_Rigged-autoware vehicle Check \"Sensor Effects\" Check \"Enable LIDAR\" Check \"Enable Lidar Prediction\" You should see 3D bounding boxes highlighting Autoware Lidar detections in the simulator main view. To view Camera detections: Start the simulator in the San Francisco map with XE_Rigged-autoware vehicle Check \"Toggle Main Camera\" Check \"Enable Camera Prediction\" You should see 2D bounding boxes highlighting Autoware Camera detections in the simulator main camera view.","title":"Ground truth obstacles"},{"location":"perception-ground-truth/#ground-truth-obstacles","text":"","title":"Ground Truth Obstacles"},{"location":"perception-ground-truth/#overview","text":"You can use the LGSVL Simulator to view, subscribe to, and compare ground truth obstacle information. The simulator allows visualization of 2D or 3D bounding boxes of vehicles, pedestrians, and unknown objects, and publishes detailed information (currently in a custom ROS message format) about the ground truth obstacles.","title":"Overview"},{"location":"perception-ground-truth/#view-ground-truth-obstacles-in-simulator","text":"Ground truth obstacles for traffic can be viewed in the simulator with both 3D bounding boxes as well as 2D bounding boxes in the camera. To view 3D Bounding boxes in the simulator: Start the simulator in the San Francisco map and desired vehicle Check \"Sensor Effects\" Check \"Enable Traffic\" Check \"Enable Ground Truth 3D\" You should see 3D boxes in green highlighting NPC vehicles in the simulator main view. To view 2D bounding boxes: Start the simulator in the San Francisco map with desired vehicle Check \"Ground Truth 2D\" You should see 2D boxes highlighting NPC vehicles in the \"Ground Truth 2D Camera\" camera view.","title":"View ground truth obstacles in Simulator"},{"location":"perception-ground-truth/#bounding-box-colors","text":"Green: Vehicles Yellow: Pedestrians Purple: Unknown","title":"Bounding box colors"},{"location":"perception-ground-truth/#subscribe-to-ground-truth-ros-messages","text":"LGSVL Simulator also publishes custom ROS messages describing the ground truth data of non-ego vehicles. In order to subscribe to the ground truth messages, you will need the ROS package lgsvl_msgs . It contains custom ROS message types for 2D and 3D bounding boxes. You will also need to be running rosbridge.","title":"Subscribe to ground truth ROS messages"},{"location":"perception-ground-truth/#install-the-lgsvl_msgs-ros-package","text":"","title":"Install the lgsvl_msgs ROS package"},{"location":"perception-ground-truth/#use-lgsvl-apollo-or-autoware-repository","text":"If you are using LGSVL's forks of Apollo or Autoware , the package is already included as a submodule in the respective workspace: LGSVL Autoware: autoware - ros - src - msgs - lgsvl_msgs LGSVL Apollo: apollo - ros_pkgs - src - lgsvl_msgs Following the instructions to build the ROS workspace will build the lgsvl_msgs package as well. If you are not running LGSVL's Apollo or Autoware forks, you can directly clone our lgsvl_msgs package into your ROS workspace and build.","title":"Use LGSVL Apollo or Autoware repository"},{"location":"perception-ground-truth/#manually-install-lgsvl_msgs","text":"Clone lgsvl_msgs to your ROS workspace or msgs directory: $ git clone https://github.com/lgsvl/lgsvl_msgs {MY_ROS_WS} Build the ROS workspace: $ catkin_make","title":"Manually install lgsvl_msgs"},{"location":"perception-ground-truth/#subscribe-to-ground-truth-messages-from-simulator","text":"You can subscribe to ground truth messages published as ROS messages (when 2D/3D ground truth are enabled) Topic: /simulator/ground_truth/2d_detections Message type: lgsvl_msgs/Detection2DArray: Link Topic: /simulator/ground_truth/3d_detections Message type: lgsvl_msgs/Detection3DArray: Link","title":"Subscribe to ground truth messages from Simulator"},{"location":"perception-ground-truth/#view-estimated-detections-in-simulator","text":"If you are running Autoware with LGSVL Simulator, you can also visualize Autoware object detection outputs in the simulator for both Lidar-based and Camera-based detections. Make sure that Autoware perception module is running and detection output topics have output messages. (You can also publish to the below topics even if you are not using Autoware) Required ROS topics: - For Lidar detections: /detection/lidar_objects - For Camera detections: /detection/vision_objects To view Lidar detections: Start the simulator in the San Francisco map with XE_Rigged-autoware vehicle Check \"Sensor Effects\" Check \"Enable LIDAR\" Check \"Enable Lidar Prediction\" You should see 3D bounding boxes highlighting Autoware Lidar detections in the simulator main view. To view Camera detections: Start the simulator in the San Francisco map with XE_Rigged-autoware vehicle Check \"Toggle Main Camera\" Check \"Enable Camera Prediction\" You should see 2D bounding boxes highlighting Autoware Camera detections in the simulator main camera view.","title":"View estimated detections in Simulator"}]}