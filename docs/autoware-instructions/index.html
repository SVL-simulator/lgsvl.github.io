<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="LG Silicon Valley Lab">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Running with Autoware - LGSVL Simulator</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Running with Autoware";
    var mkdocs_page_input_path = "autoware-instructions.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-130546445-1', 'lgsvlsimulator.com/docs');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> LGSVL Simulator</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Quick start</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../getting-started/">Getting started</a>
                </li>
                <li class="">
                    
    <a class="" href="../build-instructions/">Build instructions</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Running with Autoware</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#autoware-with-lg-svl-simulator">Autoware with LG SVL Simulator</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#table-of-contents">Table of Contents</a></li>
        
            <li><a class="toctree-l4" href="#general">General</a></li>
        
            <li><a class="toctree-l4" href="#setup">Setup</a></li>
        
            <li><a class="toctree-l4" href="#launching-autoware-alongside-lg-svl-simulator">Launching Autoware alongside LG SVL Simulator</a></li>
        
            <li><a class="toctree-l4" href="#copyright-and-license">Copyright and License</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../apollo-instructions/">Running with Apollo</a>
                </li>
                <li class="">
                    
    <a class="" href="../keyboard-shortcuts/">Keyboard shortcuts</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">LGSVL Simulator</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Quick start &raquo;</li>
        
      
    
    <li>Running with Autoware</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/lgsvl/simulator/edit/master/docs/autoware-instructions.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="autoware-with-lg-svl-simulator">Autoware with LG SVL Simulator</h1>
<h2 id="table-of-contents">Table of Contents</h2>
<p><a href="#general">General</a></p>
<p><a href="#setup">Setup</a></p>
<ul>
<li>
<p><a href="#requirements">Requirements</a></p>
</li>
<li>
<p><a href="#docker-image-setup">Docker image setup</a></p>
</li>
<li>
<p><a href="#simulator-installation">Simulator Installation</a></p>
</li>
</ul>
<p><a href="#launching-autoware-alongside-lg-svl-simulator">Launching Autoware alongside Simulator</a></p>
<p><a href="#copyright-and-license">Copyright and License</a> </p>
<h2 id="general">General</h2>
<p>This guide goes through how to run Autoware with the LG SVL Simulator.</p>
<p>This <a href="https://github.com/lgsvl/Autoware">link</a> leads to our fork of the ROS-based open-source software Autoware. The repository contains various fixes and changes on top of Autoware to allow running it with LG Silicon Valley Lab's Autonomous Driving Simulator. </p>
<p>This fork of Autoware is currently rebased on Autoware release 1.9.0.</p>
<p>In order to run Autoware with the LGSVL simulator, it is easiest to build and run a custom Docker image. It will also be necessary to clone LGSVL's <a href="https://github.com/lgsvl/autoware-data">autoware-data</a> repository, which contains the HD maps, point cloud maps, and launch scripts needed to run Autoware in the simulator's default San Francisco environment. </p>
<p>Autoware communicates with the simulator using the rosbridge_suite, which provides JSON interfacing with  ROS publishers/subscribers. </p>
<h2 id="setup">Setup</h2>
<h3 id="requirements">Requirements</h3>
<ul>
<li>Linux operating system</li>
<li>Nvidia graphics card</li>
</ul>
<h3 id="docker-image-setup">Docker image setup</h3>
<p>We recommend using a Docker container to run Autoware. We do not currently provide an image on Docker Hub, so it is necessary to build the Docker image first manually. </p>
<h4 id="installing-docker-ce">Installing Docker CE</h4>
<p>To install Docker CE please refer to the <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">official documentation</a>. We also suggest following through with the <a href="https://docs.docker.com/install/linux/linux-postinstall/">post installation steps</a>.</p>
<h4 id="installing-nvidia-docker">Installing Nvidia Docker</h4>
<p>Before installing nvidia-docker make sure that you have an appropriate Nvidia driver installed. To test if nvidia drivers are properly installed enter <code>nvidia-smi</code> in a terminal. If the drivers are installed properly an output similar to the following should appear.</p>
<pre><code>    +-----------------------------------------------------------------------------+
    | NVIDIA-SMI 390.87                 Driver Version: 390.87                    |
    |-------------------------------+----------------------+----------------------+
    | GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
    | Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
    |===============================+======================+======================|
    |   0  GeForce GTX 108...  Off  | 00000000:65:00.0  On |                  N/A |
    |  0%   59C    P5    22W / 250W |   1490MiB / 11175MiB |      4%      Default |
    +-------------------------------+----------------------+----------------------+

    +-----------------------------------------------------------------------------+
    | Processes:                                                       GPU Memory |
    |  GPU       PID   Type   Process name                             Usage      |
    |=============================================================================|
    |    0      1187      G   /usr/lib/xorg/Xorg                           863MiB |
    |    0      3816      G   /usr/bin/gnome-shell                         305MiB |
    |    0      4161      G   ...-token=7171B24E50C2F2C595566F55F1E4D257    68MiB |
    |    0      4480      G   ...quest-channel-token=3330599186510203656   147MiB |
    |    0     17936      G   ...-token=5299D28BAAD9F3087B25687A764851BB   103MiB |
    +-----------------------------------------------------------------------------+
</code></pre>

<p>The installation steps for nvidia-docker are available at the <a href="https://github.com/NVIDIA/nvidia-docker">official repo</a>.</p>
<h4 id="building-lgsvl-autoware-docker-image">Building LGSVL Autoware Docker image</h4>
<p>Cloning requires instaling Git LFS. If you do not already have Git LFS installed, follow these <a href="https://git-lfs.github.com/">instructions</a>. </p>
<p>Clone this repository to your home directory, making sure to checkout the <code>lgsvl_develop</code> branch:</p>
<pre><code>$ git clone --recurse-submodules git@github.com:lgsvl/autoware.git -b lgsvl_develop
</code></pre>

<p>Build the Docker image. This should take some time.</p>
<pre><code>$ cd autoware/docker/generic
$ ./build.sh kinetic
</code></pre>

<p>You should now have a Docker image named <code>autoware-kinetic</code>.</p>
<p>We also need LGSVL's autoware-data repository, which contains map files and launch scripts for running with the simulator. This repository also uses Git LFS.</p>
<p>Clone the autoware-data repository:</p>
<pre><code>$ mkdir ~/shared_dir &amp;&amp; cd ~/shared_dir
$ git clone git@github.com:lgsvl/autoware-data.git
</code></pre>

<p>You are now ready to bring up a Docker container and run Autoware. Launch the container:</p>
<pre><code>$ cd ~/autoware/docker/generic
$ ./run.sh kinetic
</code></pre>

<p>You should now be logged into the container under the username <code>autoware</code>.</p>
<h3 id="simulator-installation">Simulator installation</h3>
<p>Follow the instructions on our simulator Github page <a href="https://github.com/lgsvl/simulator">here</a>.</p>
<h2 id="launching-autoware-alongside-lg-svl-simulator">Launching Autoware alongside LG SVL Simulator</h2>
<p>To launch Autoware, first bring up the Docker container as described in the previous section. </p>
<p>Inside the container, run Autoware:</p>
<pre><code>autoware@[MY_DESKTOP]:~$ cd ~/autoware/ros
autoware@[MY_DESKTOP]:~$ ./run
</code></pre>

<p>A few terminals will open, as well as a GUI for the runtime manager. In the runtime manager, click on the 'Quick Start' tab and load the following launch files from <code>~/shared_dir/autoware-data/my_launch_sf_map/</code> by clicking "Ref" to the right of each text box:</p>
<ul>
<li><code>my_map.launch</code></li>
<li><code>my_sensing_simulator.launch</code></li>
<li><code>my_localization.launch</code></li>
<li><code>my_detection.launch</code></li>
<li><code>my_mission_planning.launch</code></li>
<li><code>my_motion_planning.launch</code></li>
</ul>
<p><img alt="" src="../images/autoware-runtime-manager.jpg" /></p>
<p>Click "Map" to load the launch file pertaining to the HD maps. An "Ok" should appear to the right of the "Ref" button when successfully loaded. Then click "Sensing" which brings up rosbridge. </p>
<p>Run the LG SVL simulator, choosing "SanFrancisco" map and "XE_Rigged-autoware" for Robot. After "my_sensing_simulator.launch" has been loaded, the simulator should show "Connected", showing that the simulator has established a connection with the rosbridge server. </p>
<p><img alt="" src="../images/autoware-simulator.jpg" /></p>
<p>Click "Run" to start, and a vehicle should appear in the streets of San Francisco. On the left, click the check boxes for "Enable GPS" and "Enable LIDAR". </p>
<p>In the Autoware Runtime Manager, continue loading the other launch files - click "Localization" and wait for the time to display to the right of "Ref". Then click "Detection," "Mission Planning", then "Motion Planning". </p>
<p><img alt="" src="../images/autoware-runtime-running.jpg" /></p>
<p>Then click "Rviz" to launch Rviz - the vector map and location of the vehicle in the map should show. </p>
<p>To see the vehicle drive, click "2D Nav Goal" in Rviz, then click a destination point and drag slightly in a feasible direction (in the direction of the driving lane) to give a goal destination pose to the planner. The vehicle should plan a path and begin driving towards the destination.</p>
<p><img alt="" src="../images/autoware-rviz.jpg" /></p>
<p>You should see something similar in RViz to the above when the vehicle successfully starts navigating using Autoware.</p>
<p><img alt="" src="../images/autoware-simulator-running.jpg" /></p>
<h2 id="copyright-and-license">Copyright and License</h2>
<p>This software contains code licensed as described in LICENSE.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../apollo-instructions/" class="btn btn-neutral float-right" title="Running with Apollo">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../build-instructions/" class="btn btn-neutral" title="Build instructions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2018 LG Electronics Inc.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/lgsvl/simulator/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../build-instructions/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../apollo-instructions/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
