<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="LG Silicon Valley Lab">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Python API How to Run a Scenario - LGSVL Simulator</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Python API How to Run a Scenario";
    var mkdocs_page_input_path = "api-how-to-run-scenario.md";
    var mkdocs_page_url = "/api-how-to-run-scenario/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-130546445-1', 'lgsvlsimulator.com/docs');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <!-- edit link, open in new tab -->
        <a href="https://www.lgsvlsimulator.com" class="icon icon-home" target="_blank_"> LGSVL Simulator</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Quick start</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../getting-started/">Getting started</a>
                </li>
                <li class="">
                    
    <a class="" href="../build-instructions/">Build instructions</a>
                </li>
                <li class="">
                    
    <a class="" href="../keyboard-shortcuts/">Keyboard shortcuts</a>
                </li>
                <li class="">
                    
    <a class="" href="../perception-ground-truth/">Ground truth obstacles</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Integration with AD</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../autoware-instructions/">Running with Autoware</a>
                </li>
                <li class="">
                    
    <a class="" href="../apollo3-5-instructions/">Running with Apollo 3.5</a>
                </li>
                <li class="">
                    
    <a class="" href="../apollo-instructions/">Running with Apollo 3.0</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Python API</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../python-api/">Python API Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../api-quickstart-descriptions/">Python API Quickstart Examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../api-example-descriptions/">Python API Use Case Examples</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Python API How to Run a Scenario</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#how-to-run-a-scenario-or-test-case">How To Run a Scenario or Test Case</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#how-to-edit-the-ego-vehicle">How to Edit the EGO vehicle</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../map-annotation/">Map Annotation</a>
                </li>
                <li class="">
                    
    <a class="" href="../openai-gym/">Reinforcement Learning with OpenAI Gym</a>
                </li>
                <li class="">
                    
    <a class="" href="../lane-following/">Deep Learning Lane Following Model</a>
                </li>
                <li class="">
                    
    <a class="" href="../create-ros2-ad-stack/">How to create a simple ROS2-based AD stack</a>
                </li>
                <li class="">
                    
    <a class="" href="../add-new-ego-vehicle/">How to add a new ego vehicle</a>
                </li>
                <li class="">
                    
    <a class="" href="../npc-map-navigation/">NPC Map Navigation</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Support</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../faq/">FAQ</a>
                </li>
                <li class="">
                    
    <a class="" href="../contributing/">Contributing</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">LGSVL Simulator</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Python API &raquo;</li>
        
      
    
    <li>Python API How to Run a Scenario</li>
    <li class="wy-breadcrumbs-aside">
      
      <!-- edited to not display Github edit link -->
        <a style="display:none;" href="https://github.com/lgsvl/simulator/edit/master/Docs/api-how-to-run-scenario.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="how-to-run-a-scenario-or-test-case">How To Run a Scenario or Test Case</h1>
<p>The following steps detail how to run the Traffic Jam scenario. This scenario and other example scenarios can be found on our <a href="../api-example-descriptions/">examples page</a>.</p>
<ol>
<li>Install Simulator Python API by navigating to the Api submodule directory under the simulator repository:
    <code>pip3 install --user .</code></li>
<li>
<p>Start the simulator, but leave it on the main page. The Python script will load the map and correct vehicle.</p>
</li>
<li>
<p>Set environment variables SIMULATOR_HOST and BRIDGE_HOST</p>
<ul>
<li>SIMULATOR_HOST is where the simulator will be run. The default value for this is "localhost" and does not need to be set if the simulator is running on the same machine that the python script will be run from.</li>
<li>BRIDGE_HOST is where the AD stack will be run. This is relative to where the simulator is run. The default value is "localhost" which is the same machine as the simulator.</li>
<li>For example, if computer A will run the simulator and computer B will run the AD stack<ul>
<li>SIMULATOR_HOST should be set to the IP of computer A</li>
<li>BRIDGE_HOST should be set to the IP of computer B</li>
</ul>
</li>
<li>To set the variables for the current terminal window use
<code>export SIMULATOR_HOST=192.168.1.100</code></li>
</ul>
</li>
<li>
<p>Start your AD stack. The example scripts are written for Apollo 3.5. See below for how to edit the scripts to work with other AD stacks.</p>
<ul>
<li>Start all modules and the bridge (if relevant)</li>
<li>Run the python script from a terminal. The simulator will wait for the bridge to connect and then run for 1 second allowing the AD stack to localize. </li>
<li>This script spawns several NPCs that make up the traffic jam. The NPC type that is created can be specified if desired.<ul>
<li>If random NPC types is acceptable, then no additional command line argument is necessary.
<code>./scenario-trafficjam.py</code></li>
<li>If all NPCs should be the same type, 1 command line argument should be given specifying the type.
<code>./scenario-trafficjam.py SchoolBus</code></li>
<li>If each NPC needs to be specified, 6 command line arguments are required specifying each NPC. 
<code>./scenario-trafficjam.py Sedan SUV Jeep HatchBack SchoolBus DeliveryTruck</code></li>
</ul>
</li>
<li>Set the destination for the AD stack. For this scenario, the destination is the end of the current lane.
<a href="../images/highway-scenario-destination.png"><img alt="" src="../images/highway-scenario-destination.png" /></a></li>
<li>In the terminal running the python script, press enter to resume the simulation.</li>
<li>The AV should start driving forward towards the stopped NPCs. It should avoid crashing into the NPC.</li>
</ul>
</li>
</ol>
<h2 id="how-to-edit-the-ego-vehicle">How to Edit the EGO vehicle</h2>
<p>In each of the example scenarios and test cases, there is a section that setups up the EGO vehicle: <a href="../images/python-ego-setup.png"><img alt="" src="../images/python-ego-setup.png" /></a></p>
<p>If using a different AD stack, the vehicle type needs to be changed.
* Change the agent name (orange string) to what is desired.
    * e.g. For Autoware it might be "XE_Rigged-autoware"</p>
<p>The enabled sensors can be adjusted as well.
* The list of strings controls which sensors send data over the bridge. By default the CANBUS is always enabled.
    * e.g. Autoware only needs the "velodyne" and "GPS" in order to drive. </p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../map-annotation/" class="btn btn-neutral float-right" title="Map Annotation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../api-example-descriptions/" class="btn btn-neutral" title="Python API Use Case Examples"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2019 LG Electronics Inc.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/lgsvl/simulator/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../api-example-descriptions/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../map-annotation/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
